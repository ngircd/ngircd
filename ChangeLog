
                     ngIRCd - Next Generation IRC Server

                        (c)2001-2009 Alexander Barton,
                    alex@barton.de, http://www.barton.de/

               ngIRCd is free software and published under the
                   terms of the GNU General Public License.

                               -- ChangeLog --


ngIRCd Release 14.1 (2009-05-05)

  - Security: fix remotely triggerable crash in SSL/TLS code.
  - BSD start script contrib/ngircd.sh has been renamed to ngircd-bsd.sh.
  - New start/stop script for RedHat-based distributions:
    contrib/ngircd-redhat.init, thanks to Naoya Nakazawa <naoya@sanow.net>.
  - Doxygen: update source code repository link to GIT.
  - Debian: build ngircd-full-dbg package.
  - Allow ping timeout quit messages to show the timeout value.
  - Fix error handling on compressed links.
  - Fix server list announcement.
  - Do not remove hostnames from info text.

ngIRCd Release 14 (2009-04-20)

  - Display IPv6 addresses as "[<addr>]" when accepting connections.

  ngIRCd 14~rc1 (2009-03-29)
  - Updated Debian/Linux init script (see contrib/Debian/ngircd.init).
  - Allow creation of persistent modeless channels.
  - The INFO command reports the compile time now (if available).
  - Spell check and enhance ngIRCd manual pages.
  - Channel mode changes: break on syntax errors in MODE command.
  - Support individual channel keys for pre-defined channels: introduce
    new configuration variable "KeyFile" in [Channel] sections in ngircd.conf,
    here a file can be configured for each pre-defined channel which contains
    individual channel keys for different users.
  - Remove limit on maximum number of predefined channels in ngircd.conf.
  - Updated ngircd.spec file for building RPM packages.
  - Add new and missing files to Mac OS X Xcode project, and update project.
  - Reject masks with wildcard after last dot.
  - TLS/SSL: remove useless error message when ssl connection is closed.
  - Fix memory leak when a encrypted and compressed server link goes down.
    (closes bug #95, reported by Christoph, fiesh@fiesh.homeip.net)
  - Fix handling of channels containing dots.
    (closes ug #93, reported by Gonosz Csiga)

ngIRCd Release 13 (2008-12-25)

  - Updated documentation, especially doc/Services.txt and doc/SSL.txt.
  - Make the test suite work on OpenSolaris.

  ngIRCd 13~rc1 (2008-11-21):
  - New version number scheme :-)
  - Initial support for IRC services, using a RFC1459 style interface,
    tested with IRCServices (http://www.ircservices.za.net/) version 5.1.13.
    For this to work, ngIRCd now supports server-server links conforming
    to RFC 1459. New ngircd.conf(5) option: ServiceMask.
  - Support for SSL-encrypted server-server and client-server links using
    OpenSSL (configure: --with-openssl) or GNUTLS (configure: --with-gnutls).
    New ngircd.conf(5) options: SSLPorts, SSLKeyFile, SSLKeyFilePassword,
    SSLCertFile, SSLDHFile, and SSLConnect.
  - Server local channels have been implemented, prefix "&", that are only
    visible to users of the same server and are not visible in the network.
    In addition ngIRCd creates a "special" channel &SERVER on startup and logs
    all the messages to it that a user with mode +s receives.
  - New make target "osxpkg" to build a Mac OS X installer package.
  - Debug mode: enable support for GNU libc memory tracing (see mtrace(3)).
  - SysV init script: use LSB logging functions, if available.
  - Added some more FAQ entries (regarding logging and IRC operators).
  - Allow IRC operators to overwrite channel limits.
  - Support for enhanced PRIVMSG and NOTICE message targets.
  - More tests have been added to the test-suite ("make check"), and two
    servers are started for testing server-server linking.
  - Added a timestamp to log messages to the console.
  - New configuration option "NoIdent" to disable IDENT lookups even if the
    daemon is compiled with IDENT support.

ngIRCd 0.12.1 (2008-07-09)

  - Allow mixed line terminations (CR+LF/CR/LF) in non-RFC-compliant mode
  - Don't allow stray \r or \n in command parameters
  - --configtest: return non-zero exit code if there are errors
  - Update ngIRCd manual pages
  - Add option aliases -V (for --version) and -h (for --help).
  - Fix 'no-ipv6' compile error.
  - Make Listen parameter a comma-separated list of addresses. This also
    obsoletes ListenIPv4 and ListenIPv6 options. If Listen is unset, it
    is treated as Listen="::,0.0.0.0".
    Note: ListenIPv4 and ListenIPv6 options are still recognized,
    but ngircd will print a warning if they are used in the config file.

ngIRCd 0.12.0 (2008-05-13)

  - Fix Bug: 85: "WHO #SecretChannel" that user is not a member of now returns
    proper RPL_ENDOFWHO_MSG instead of nothing. (Ali Shemiran)
  - Fix compile on FreeBSD 5.4 and AIX.
  - If bind() fails, also print IP address and not just the port number.

  ngIRCd 0.12.0-pre2 (2008-04-29)
  - IPv6: Add config options to disable ipv4/ipv6 support.
  - Don't include doc/CVS.txt in distribution archive, use doc/GIT.txt now!
  - Documentation: get rid of some more references to CVS, switch to GIT.
  - Get rid of cvs-version.* and CVSDATE definition.
  - Report ERR_NOTONCHANNEL when trying to part a channel one is not member of.
  - Testsuite: remove erroneous ConfUID setting in config file.

  ngIRCd 0.12.0-pre1 (2008-04-20)
  - Include Mac OS X Xcode project in distribution archives.
  - Do not exit on SIGHUP or /REHASH if the config file cannot opened.
  - Add IPv6 support.
  - Install a LaunchDaemon script to start/stop ngIRCd on Mac OS X.
  - Implemented IRC commands INFO, SUMMON (dummy), and USERS (dummy) and
    enhanced test suite to check these commands. (Dana Dahlstrom)
  - RPL_WHOREPLY messages generated by IRC_WHO didn't include flags (*,@,+).
    (Dana Dahlstrom)
  - IRC_WHO now supports search patterns and will test this against user
    nickname/servername/hostname, etc. as required by RFC 2812, Section 3.6.1.
    (reported by Dana Dahlstrom)
  - Add test cases for "WHO" command. (Dana Dahlstrom)
  - Implement RFC 2812 handling of "0" argument to 'JOIN': must be treated
    as if the user had sent PART commands for all channels the user is a
    member of. (Dana Dahlstrom)
  - Allow NOTICEs to be sent to a channel. (Fabian Schlager)

ngIRCd 0.11.1 (2008-02-26)

  - Fix sending of JOIN commands between servers when remote server appended
    mode flags. (Rolf Eike Beer) [from HEAD]
  - Send "G" instead of "H" flag in WHO replies. (reported by Dana Dahlstrom)
  - Under some circumstances ngIRCd issued channel MODE message with a
    trailing space. (Dana Dahlstrom) [from HEAD]

ngIRCd 0.11.0 (2008-01-15)

  ngIRCd 0.11.0-pre2 (2008-01-07)
  - SECURITY: IRC_PART could reference invalid memory, causing
    ngircd to crash [from HEAD]. (CVE-2008-0285)
  
  ngIRCd 0.11.0-pre1 (2008-01-02)
  - Use dotted-decimal IP address if hostname is >= 64.
  - Add support for /STAT u (server uptime) command.
  - New [Server] configuration Option "Bind" allows to specify
    the source IP address to use when connecting to remote server.
  - New configuration option "MaxNickLength" to specify the allowed maximum
    length of user nick names. Note: must be unique in an IRC network!
  - Enhanced the IRC+ protocol to support an enhanced "server handshake" and
    enable server to recognize numeric 005 (ISUPPORT) and 376 (ENDOFMOTD).
    See doc/Protocol.txt for details.
  - Re-added doc/SSL.txt to distribution -- got lost somewhere!?
  - Fixes the wrong logging output when nested servers are introduced
    to the network as well as the wrong output of the LINKS command.
  - Update Mac OS X Xcode project file for Xcode 3.
  - Adjust test suite to be usable on HP/UX 11.11 :-)
  - Fix code to compile using K&R C compiler and ansi2kr again.
  - New config option NoDNS: Disables DNS lookups when clients connect.
  - Fixed propagation of channel mode 'P' on server links.
  - Numeric 317: implemented "signon time" (displayed in WHOIS result).
  - Fixed code that prevented GCC 2.95 to compile ngIRCd.
  - Adjust path names in manual pages according to "./configure" settings.
  - Added new server configuration option "Passive" for "Server" blocks to
    disable automatic outgoing connections (similar to -p option to ngircd,
    but only for the specified server). (Tassilo Schweyer)
  - Don't connect to a server if a connection to another server within the
    same group is already in progress.
  - Added support for the WALLOPS command. Usage is restricted to IRC
    operators.

ngIRCd 0.10.4 (2008-01-07)

  - SECURITY: IRC_PART could reference invalid memory, causing
    ngircd to crash [from HEAD]. (CVE-2008-0285)
  
ngIRCd 0.10.3 (2007-08-01)

  - SECURITY: Fixed a severe bug in handling JOIN commands, which could
    cause the server to crash. Thanks to Sebastian Vesper, <net@veoson.net>.
    (CVE-2007-6062)

ngIRCd 0.10.2 (2007-06-08)

  ngIRCd 0.10.2-pre2 (2007-05-19)
  - Server links are allowed to use larger write buffers now (up to 50 KB).

  ngIRCd 0.10.2-pre1 (2007-05-05)
  - Fix compressed server links (broken since 0.10.0).
  - Predefined Channel configuration now allows specification of channel key
    (mode k) and maximum user count (mode l).
  - When using epoll() IO interface, compile in the select() interface as
    well and fall back to it when epoll() isn't available on runtime.
  - New configure option "--without-select" to disable select() IO API
    (even when using epoll(), see above).
  - Added support for IO APIs "poll()" and "/dev/poll".
  - Reorganized internal handling of invite and ban lists.

ngIRCd 0.10.1 (2006-12-17)

  - Fixed validation of server names containing digits.
  - Update the "info text" of the local server after re-reading configuration.
  - Changed Numerics 265 and 266 to follow ircd 2.11.x "standards".
  - Allow PASS syntax defined in RFC 1459 for server links, too.
  - Enhanced ISUPPORT message (005 numeric).
  - New configuration option "PredefChannelsOnly": if set, clients can only
    join predefined channels.
  - Code cleanups: use "LogDebug(...)" instead of "Log(LOG_DEBUG, ...)", use
    "strcspn()", unsigned vs. signed, use "const", fix whitespaces, ...

ngIRCd 0.10.0 (2006-10-01)

  - Fixed file handle leak when daemon is not able to send MOTD to a client.

  ngIRCd 0.10.0-pre2 (2006-09-09)
  - Fixed build problems with GCC option -fstack-protector.
  - Minor documentation updates.

  ngIRCd 0.10.0-pre1 (2006-08-02)
  - Validate "ServerName" (see RFC 2812, section 2.3.1).
  - Enhanced DIE to accept a single parameter ("comment text") which is sent
    to all locally connected clients before the server goes down.
  - The ngIRCd handles time shifts backwards more gracefully now (the
    timeout handling doesn't disconnect clients by mistake any more).
  - Internal: Restructured connection handling (the connection ID is equal
    to the file descriptor of the connection).
  - Internal: Simplified resolver code.
  - JOIN now supports more than one channel key at a time.
  - Implemented numeric "333": Time and user name who set a channel topic.
  - Enhanced the handler for PING and PONG commands: fix forwarding and enable
    back-passing of a client supplied additional argument of PING.
  - Changed handling of timeouts for unregistered connections: don't reset
    the counter if data is received and disconnect clients earlier.
  - Removed unnecessary #define of "LOCAL", now use plain C "static" instead.
  - Channel topics are no longer limited to 127 characters: now the only limit
    is the maximum length of an IRC command, i. e. 512 bytes (in practice, this
    limits the topic to about 490 characters due to protocol overhead).
  - Reverse DNS lookup code now checks the result by doing an additional
    lookup to prevent spoofing.
  - Added new IO layer which (optionally) supports epoll() and kqueue() in
    addition to the select() interface.

ngIRCd 0.9.2 (2005-10-15)

  - Fixed a bug that could cause the daemon to crash when outgoing server
    connections can't be established.
  - Fixed a bug that caused the daemon to leak file descriptors when no
    resolver subprocesses could be created.
  - Fixed server NOTICEs to users with "s" mode ("server messages").
  - Fixed a format string bug in "connection statistics" messages to clients.

ngIRCd 0.9.1 (2005-08-03)

  - The KILL command killed much more than desired (including server links!)
    when the target user is connected to a remote server. Bug introduced in
    ngIRCd 0.9.0 ...  Reported by <qssl@fastmail.fm>, Thanks!
  - Changed some constants to be "signed" (instead of unsigned) to solve
    problems with old (pre-ANSI) compilers.

ngIRCd 0.9.0 (2005-07-24)

  ngIRCd 0.9.0-pre1 (2005-07-09)
  - Fixed maximum length of user names, now allow up to 9 characters.
  - Cut off oversized IRC messages that should be sent to the network instead
    of shutting down the (wrong) connection.
  - Don't generate error messages for unknown commands received before the
    client is registered with the server (like the original ircd).
  - Never run with root privileges but always switch the user ID.
  - Make "netsplit" messages RFC compliant.
  - Fix handling of QUIT Messages: send only one message, even if the client
    is member of multiple channels.
  - Don't exit server if closing of a socket fails; instead ignore it and
    pray that this will be "the right thing" ...
  - Implemented the IRC function "WHOWAS".
  - Don't enable assert() calls when not ./configure'd with --enable-debug.
  - Fixed ./configure test for TCP Wrappers: now it runs on Mac OS X as well.
  - Enhanced configure script: now you can pass an (optional) search path
    to all --with-XXX parameters, e. g. "--with-ident=/opt/ident".
  - Removed typedefs for the native C datatypes.
    Use stdbool.h / inttypes.h if available.
  - New configuration option "OperServerMode" to enable a workaround needed
    when running an network with ircd2 servers and "OperCanUseMode" enabled
    to prevent the ircd2 daemon to drop mode changes of IRC operators.
    Patch by Florian Westphal, <westphal@foo.fh-furtwangen.de>.
  - Implemented support for "secret channels" (channel mode "s").
  - New configuration option "Mask" for [Operator] sections to limit OPER
    commands to users with a specific IRC mask. Patch from Florian Westphal.
  - Write "error file" (/tmp/ngircd-XXX.err) only if compiled with debug
    code ("--enable-debug") and running as daemon process.
  - Don't create version information string each time a client connects
    but instead on server startup. By Florian Westphal.
  - New configuration variable "PidFile", section "[Global]": if defined,
    the server writes its process ID (PID) to this file. Default: off.
    Idea of Florian Westphal, <westphal@foo.fh-furtwangen.de>.
  - Code cleanups from Florian Westphal, <westphal@foo.fh-furtwangen.de>.
  - Raised the maximum length of passwords to 20 characters.
  - Fixed a memory leak when resizing the connection pool and realloc()
    failed. Now we don't fall back to malloc(), which should be sane anyway.
    Patch from Florian Westphal, <westphal@foo.fh-furtwangen.de>.
  - Added support for the Howl (http://www.porchdogsoft.com/products/howl/)
    Rendezvous API, in addition to the API of Apple (Mac OS X). The available
    API will be autodetected when you call "./configure --with-rendezvous".
  - Made ngIRCd compile on HP/UX 10.20 with native HP pre-ANSI C compiler and
    most probably other older C compilers on other systems.
  - When the daemon should switch to another user ID (ServerID is defined in
    the configuration file) and is not running in a chroot environment, it
    changes its working directory to the home directory of this user. This
    should enable the system to write proper core files when not running with
    root privileges ...

ngIRCd 0.8.3 (2005-02-03)

  - Fixed a bug that could case a root exploit when the daemon is compiled
    to do IDENT lookups and is logging to syslog. Bug discovered by CoKi,
    <coki@nosystem.com.ar>, thanks a lot!
    (CVE-2005-0226; http://www.nosystem.com.ar/advisories/advisory-11.txt)

ngIRCd 0.8.2 (2005-01-26)

  - Added doc/SSL.txt to distribution.
  - Fixed a buffer overflow that could cause the daemon to crash. Bug found
    by Florian Westphal, <westphal@foo.fh-furtwangen.de>. (CVE-2005-0199)
  - Fixed a possible buffer underrun when reading the MOTD file. Thanks
    to Florian Westphal, <westphal@foo.fh-furtwangen.de>.
  - Fixed detection of IRC lines which are too long to send. Detected by
    Florian Westphal, <westphal@foo.fh-furtwangen.de>.
  - Fixed return values of our own implementation of strlcpy(). The code has
    been taken from rsync and they fixed it, but we didn't until today :-/
    It has only been used when the system didn't implement strlcpy by itself,
    not on "modern" systems. Florian Westphal, <westphal@foo.fh-furtwangen.de>.

ngIRCd 0.8.1 (2004-12-25)

  - Autoconf: Updated config.guess and config.sub
  - Added some more debug code ...
  - Fixed wrong variable names in output of "ngircd --configtest".
  - Debian: Fixed the name of the "default file" in the init script for
    ngircd-full packages. And do the test if the binary is executable after
    reading this file.
  - Enhanced the "test suite": please have a look at src/testsuite/README!

ngIRCd 0.8.0 (2004-06-26)

  - Fixed wrong buffer size calculation for results of the resolver.

  ngircd 0.8.0-pre2 (2004-05-16)
  - Enhanced logging to console when running in "no-detached mode": added
    PID and log messages of resolver sub-processes.
  - Fixed host name lookups when using IDENT user lookups.
  - "make clean" and "make maintainer-clean" remove more files now.

  ngIRCd 0.8.0-pre1 (2004-05-07)
  - Two new configuration options: "ChrootDir" and "MotdPhrase", thanks to
    Benjamin Pineau <ben@zouh.org>. Now you can force the daemon to change
    its root and working directory to something "safe". MotdPhrase is used
    to define an "MOTD string" instead of a whole file, useful if the
    "real" MOTD file would be outside the "jail".
  - INVITE- and BAN-lists become synchronized between IRC+ servers when
    establishing new connections, if the peer supports this as well.
  - Reorganized autogen.sh and configure scripts.
  - Fixed a wrong assert() which could cause the daemon to exit spuriously
    when closing down connections.
  - Better logging of decompression errors returned by zlib.
  - Servers other than the destination server didn't clean up the invite
    list of an "invite-only" channel properly when an INVITE'd user joined.
  - Changed the reply of the MODE command to match the syntax of the
    original ircd exactly: the unnecessary but missing ":" before the last
    parameter has been added.
  - Fixed TRACE: don't output "Serv" lines for ourself; display more info.
  - Results of the resolver (hostnames and IDENT names) are discarded after
    the client is successfully registered with the server.
  - Better logging while establishing and shutting down connections.
  - The type of service (TOS) of all sockets is set to "interactive" now.
  - Added short command line option "-t" as alternative to "--configtest".
  - Added optional support for "IDENT" lookups on incoming connections. You
    have to enable this function with the ./configure switch "--with-ident".
    The default is not to do IDENT lookups.

ngIRCd 0.7.7 (2004-02-05)

  - The info text ("real name") of users is set to "-" if none has been
    specified using the USER command (e. g. "USER user * * :"). Reason:
    the original ircd doesn't like empty ones and would KILL such users.
  - Fixed (optional) TCP Wrapper test which was broken and could result in
    false results. Thanks to Fuminori Tanizaki <tany@mcnet.ad.jp>!
  - Removed "USE_" prefixes of configuration #defines.

ngIRCd 0.7.6 (2003-12-05)

  - Fixed abort() ("server crash") when INVITE'ing users to nonexistent
    channels. Bug found by <hiddenx@wp.pl>.
  - Extended version numbering of CVS versions (added date).
  - Enhanced/fixed doc/Protocol.txt;

ngIRCd 0.7.5 (2003-11-07)

  - Fixed ban behavior: users which are banned from a channel can't no
    longer send PRIVMSG's to this channel (fixes Bug #47).
  - Fixed and enhanced the "penalty handling" of the server: commands that
    require more resources block the client for a short time.
  - Changed the internal time resolution to one second.
  - New configuration variable "MaxConnectionsIP" to limit the number of
    simultaneous connections from a single IP that the server will accept.
    This configuration options lowers the risk of denial of service attacks
    (DoS), the default is 5 connections per client IP.
  - Fixed build problems under Mac OS X 10.3.
  - Use "-pipe" when compiling with gcc, speeds things up a little :-)
  - Added new configuration variable "Listen" to bind all listening
    sockets of the server to a single IP address.
  - Suppress misleading error message of diff during make run.
  - Enhanced test-suite and made it work on GNU/Hurd.
  - Fixed minor typo in debug output :-)

ngIRCd 0.7.1 (2003-07-18)

  - Included files to build Debian packages (located in "debian/").
  - Updated config.guess and config.sub to newer upstream versions.
  - NJOIN propagates user channel modes correctly again ... Upsa.
  - Made Makefile more compatible with "make -j<n>".
  - Added support for GNU/Hurd.
  - Fixed a compiler warning related to an unnecessary assert().
  - Enhanced VERSION command when using debug versions.

ngIRCd 0.7.0 (2003-05-01)

  - "ServerName" is checked better now: a dot (".") is required.
  - The KILL command verifies and logs more parameters.

  ngIRCd 0.7.0-pre2 (2003-04-27)
  - CVS build system fixes (made autogen.sh more portable).
  - Fixed compilation and test-suite on Solaris (tested with 2.6).
  - New documentation file "doc/Platforms.txt" describing the status of
    ngIRCd on the various tested platforms.
  - Test for broken GCC on Mac OS X and disable "-pedantic" in this case.
  - Disable "-ansi" on Cygwin: system headers are incompatible.
  - The server tried to connect to other servers only once when DNS or
    socket failures occurred.
  - Fixed --configtest: There is no variable "ServerPwd", it's "Password".

  ngIRCd 0.7.0-pre1 (2003-04-22)
  - New signal handler (more secure, actions are executed outside).
  - GCC: the compiler is now called with more warning options enabled.
  - Replaced a lot of str[n]cpy(), str[n]cat() and sprintf() calls with the
    more secure functions strlcpy(), strlcat() and snprintf(). On systems
    that don't support strlcpy() and strlcat(), these functions are included
    in the libngportab now (with prototypes in portab.h).
  - If the server can't close a socket, it panics now. This is an error that
    can't occur during normal operation so there is something broken.
  - The order of log messages during disconnects is more "natural" now ;-)
  - Cleaned up handling of server configuration structures: modifying and
    removing servers during runtime works more reliable now.
  - Compression code from "conn.[ch]" is now found in new "conn-zip.[ch]"
  - Moved some connection functions from "conn.[ch]" to "conn-func.[ch]".
  - New command CONNECT to enable and add server links. The syntax is not
    RFC-compatible: use "CONNECT <name> <port>" to enable and connect an
    configured server and "CONNECT <name> <port> <host> <mypwd> <peerpwd>"
    to add a new server (ngIRCd tries to connect new servers only once!).
  - Added DISCONNECT command ("DISCONNECT <name>") to disable servers.
  - Restructured the documentation: Now the main language is English. The
    german documentation has been removed (until there is a maintainer).
  - Enhanced killing of users caused by a nickname collision.
  - Better error detection for status code ("numerics") forwarding.
  - Moved tool functions to own library: "libngtool".
  - New command TRACE (you can trace only servers at the moment).
  - New command HELP that lists all understood commands.
  - There should no longer remain "unknown connections" (see e.g. LUSERS)
    if an outgoing server link can't be established.
  - Added AC_PREREQ(2.50) to configure.in for better autoconf compatibility.
  - Conn_Close() now handles recursive calls for the same link correctly.
  - ngIRCd can register itself with Rendezvous: to enable support pass the
    new switch "--with-rendezvous" to configure.
  - Added support for TCP Wrappers library: pass "--with-tcp-wrappers" to
    configure to enable it.
  - Changed some configure options to use "--with"/"--without" as prefix
    instead of "--enable"/"--disable": "--without-syslog", "--without-zlib",
    "--with-tcp-wrappers", and "--with-rendezvous".
  - Better error reporting to clients on connect.
  - Enhanced manual pages ngircd(8) and ngircd.conf(5).
  - Documentation is now installed in $(datadir)/doc/ngircd.
  - Enhanced handling of NJOIN in case of nick collisions.

ngIRCd 0.6.1, 2003-01-21

  - Fixed KILL: you can't crash the server by killing yourself any more,
    ngIRCd no longer sends a QUIT to other servers after the KILL, and you
    can kill only valid users now.
  - The server no longer forwards commands to ordinary users, instead it
    answers with the correct error message ("no such server") now.
  - WHOIS commands weren't always forwarded as requested.
  - The server sets a correct default AWAY message now when propagating
    between servers (bug introduced in 0.6.0).
  - Fixed up and enhanced CHANINFO command: channel keys and user limits
    are synchronized between servers now, too.
  - MODE returns the key and user limit for channel members correctly now.
  - Non-members of a channel could crash the server when trying to change
    its modes or modes of its members.
  - The server didn't validate weather a target user is a valid channel
    member when changing his channel user modes which could crash ngIRCd.


Older changes (sorry, only available in german language):

ngIRCd 0.6.0, 2002-12-24

  ngIRCd 0.6.0-pre2, 2002-12-23
  - neuer Numeric 005 ("Features") beim Connect.
  - LUSERS erweitert: nun wird die maximale Anzahl der lokalen und globalen
    Clients, die dem Server bzw. im Netzwerk seit dem letzten (Re-)Start
    dem Server gleichzeitig bekannt waren, angezeigt.

  ngIRCd 0.6.0-pre1, 2002-12-18
  - beim Schliessen einer Verbindung zeigt der Server nun vor dem ERROR
    noch eine Statistik ueber die empfangene und gesendete Datenmenge an.
  - der Server wartet bei einer eingehenden Verbindung nun laenger auf den
    Resolver (4 Sekunden), wenn das Ergebnis eintrifft setzt er aber den
    Login sofort fort (bisher wurde immer mind. 1 Sekunde gewartet).
  - Connection-Strukturen werden nun "pool-weise" verwaltet; der Pool wird
    bei Bedarf bis zu einem konfigurierten Limit vergroessert.
  - Mit der neuen Konfigurationsvariable "MaxConnections" (Sektion "Global")
    kann die maximale Anzahl gleichzeitiger Verbindungen begrenzt werden.
    Der Default ist -1, "unlimitiert".
  - der Server erkennt nun, ob bereits eine eingehende Verbindung von einem
    Peer-Server besteht und versucht dann nicht mehr, selber eine eigene
    ausgehende Verbindung zu diesem auufzubauen. Dadurch kann nun auf beiden
    Servern in der Konfiguration ein Port fuer den Connect konfiguriert
    werden (beide Server versuchen sich dann gegenseitig zu connectieren).
  - Test-Suite und Dokumentation an A/UX angepasst.
  - unter HP-UX definiert das configure-Script nun _XOPEN_SOURCE_EXTENDED.
  - Server identifizieren sich nun mit asyncronen Passwoertern, d.h. das
    Passwort, welches A an B schickt, kann ein anderes sein als das, welches
    B als Antwort an A sendet. In der Konfig.-Datei, Abschnitt "Server",
    wurde "Password" dazu durch "MyPassword" und "PeerPassword" ersetzt.
  - Der Server kann nun zur Laufzeit die Konfiguration neu einlesen: dies
    macht er nach dem Befehl REHASH oder wenn ein HUP-Signal empfangen wird.
  - Channel-Mode "P" ("persistent") kann nur noch von IRC-Operatoren gesetzt
    werden. Grund: User koennen den Server sonst leicht "Channel-Flooden".
  - MOTD kann nun an andere Server geforwarded werden.
  - IRC-Befehl "TIME" implementiert.
  - Server-Server-Links koennen nun komprimiert werden, dazu wird die zlib
    (www.zlib.org) benoetigt. Unterstuetzt die Gegenseite die Komprimierung
    nicht, wird automatisch unkomprimiert kommuniziert. Das Verfahren ist
    kompatibel mit dem Original-ircd 2.10.3, d.h. beide Server koennen
    miteinander ueber komprimiert Links kommunizieren.
  - Handling der Schreibpuffer umgestellt: Server sollte schneller arbeiten.
  - Prefix-Fehler werden besser protokolliert (mit verursachendem Befehl).
  - SQUIT wird nicht mehr doppelt an andere Server weitergeleitet.
  - Der Server versucht nun vor dem Schliessen einer Verbindung Daten, die
    noch im Schreibpuffer stehen, zu senden.
  - Source in weiteres Modul "irc-info" aufgespalten.
  - Konfigurationsvariablen werden besser validiert: Laengen, Zahlen, ...
  - neuen Befehl STATS begonnen: bisher unterstuetzt wird "l" und "m".
  - bei ISON und USERHOST fehlte im Ergebnis-String der korrekte Absender.
  - IRC Operatoren koennen nun mit KILL User toeten. Achtung: ein Grund muss
    zwingend als zweiter Parameter angegeben werden!
  - neue Konfigurations-Variable "MaxJoins": Hiermit kann die maximale Zahl
    der Channels, in denen ein User Mitglied sein kann, begrent werden.
  - neuer, deutlich flexiblerer Parser fuer den MODE Befehl.
  - neue Channel-Modes l (User-Limit) und k (Channel-Key) implementiert.

ngIRCd 0.5.4, 24.11.2002

  - Fehler-Handling von connect() gefixed: der Server kann sich nun auch   
    unter A/UX wieder zu anderen verbinden.
  - in den Konfigurationsvariablen ServerUID und ServerGID kann nun nicht
    nur die numerische ID, sondern auch der Name des Users bzw. der Gruppe
    verwendet werden. Beim Start des Daemons wird nun beides angezeigt.
  - Besseres Logging von Prefix-Fehlern.
  - angenommene Sockets werden nun korrekt auf "non-blocking" konfiguriert,
    beim Senden und Empfangen werden Blockierungen besser abgefangen.
  - RPL_UMODEIS hat Code 221, nicht 211 ... *argl*
  - select() in Try_Write() hat falschen (keinen!) Timeout verwendet;
    die "Zeit-Aufloesung" des Servers sind zudem nun 2 Sekunden (TIME_RES).
    Insgesamt sollte die Reaktionszeit des Server nun besser sein.

ngIRCd 0.5.3, 08.11.2002

  - NOTICE liefert nun wirklich nie mehr einen Fehler, auch dann nicht,
    wenn der sendende Client noch gar nicht registriert ist.
  - ein "schneller Server-Reconnect" wird nur noch dann versucht, wenn die
    Verbindung zuvor ordentlich (="lange genug") in Ordnung war; somit also
    nicht meht, wenn der Peer-Server gleich beim Connect ein ERROR liefert.
    Das vermeidet "Connect-Orgien".
  - einige Datentypen aufgeraumt: z.B. sind viele INT32s nun LONGs. Das ist
    auf Platformen mit 8-Byte-Integern kompatibler.
  - RPL_YOURHOST_MSG ist nun ircII- und RFC-kompatibel ;-)
  - Segfault unter hoher Netzaktivitaet behoben: in Conn_Close() wird die
    Connection-Struktur nun frueher als "ungueltig" markiert.

ngIRCd 0.5.2, 04.10.2002

  - Buffer Overflow in Read_Resolver_Result() behoben.
  - Format-String-Bugs, die zum Abbruch des Servers fuehrten, behoben.
  - Maximale Laenge eines IRC-Prefix wurde falsch berechnet.

ngIRCd 0.5.1, 03.10.2002

  - in RPL_YOURHOST_MSG wurde ein fehlerhafter Versionsstring geliefert.
  - Test-Suite: start-server.sh, stop-server.sh und stress-server.sh koennen
    nun "manuell" von der Kommandozeile gestartet werden, stress-server.sh
    startet per Default nur noch 5 Sessions, eine andere Zahl kann auf der
    Kommandozeile uebergeben werden (Syntax: "stress-server.sh <count>").
  - In bestimmten Faellen hat der Server versucht auf einen bereits wieder
    geschlossenen Socket Daten zu schreiben; das fuehrte zu einem Abbruch des
    Servers durch ein assert(). Nun wird geprueft, ob der Socket noch ok ist.
  - im "contrib"-Verzeichnis befindet sich nun eine RPM-Spec-Datei, aus den
    .tar.gz's koennen nun mit "rpm -ta <archiv>" RPM's erzeugt werden. Danke
    an Sean Reifschneider <jafo@tummy.com>!
  - Syntax von RPL_MYINFO_MSG korrigiert: liefert nun vier Parameter.

ngIRCd 0.5.0, 20.09.2002

  - Dokumentation aktualisiert.
  - Fehler bei Validierung von "AdminInfo2" behoben.
  - Test der Flags fuer "ps" in der Testsuite verbessert, ist nun zu mehr
    Plattformen kompatibler.

  ngIRCd 0.5.0-pre2, 17.09.2002
  - Fix in IRC_WriteStrServersPrefix() war "badly broken" -- behoben.

  ngIRCd 0.5.0-pre1, 16.09.2002
  - Manual-Pages ngircd.8 und ngircd.conf.5 begonnen.
  - Wird der Netzwerk-Sniffer aktiviert (--sniffer), so schaltet der
    ngIRCd nun automatisch in den Debug-Modus.
  - auf Systemen, die inet_aton() nicht kennen (wie z.B. A/UX), kann der
    ngIRCd nun dennoch auch aktiv Server-Links aufbauen.
  - h_errno wird auf Systemen, die das nicht kennen (wie z.B. HP-UX 10.20)
    nicht mehr verwendet. Somit compiliert der ngIRCd nun auch dort :-)
  - um auf dem Ziel-System nicht vorhandene Funktionen nachzubilden wird nun
    die "libngportab" erzeugt; genutzt wird dies bisher fuer vsnprintf().
    Nun compiliert der ngIRCd auch unter Solaris 2.5.1.
  - "persistente Channels" (Mode 'P') implementiert: diese koennen in der
    Konfigurationsdatei definiert werden (Sektion "Channel", vgl. Beispiel-
    Konfiguration "sample-ngircd.conf") und bleiben auch dann bestehen,
    wenn kein User mehr im Channel ist. Zu Channel-Operatoren werden bisher
    nur IRC-Operatoren, die den Channel betreten. Die persistenten Channels
    werden durch das Flag "P" gelennzeichnet, welches normal durch Channel-
    Op's gesetzt und geloescht werden kann.
  - bei "--configtest" werden keine leere Abschnitte mehr ausgegeben.
  - Source in weitere Module aufgespalten: lists, irc-op und resolve.
  - #include's aufgeraeumt: Header includieren keine anderen mehr.
  - KICK implementiert (bisher kann nur ein User aus einem Channel geckicked
    werden, Listen, wir im RFC vorgesehen, werden bisher nicht unterstuetzt).
  - INVITE, den Channel-Mode "i" sowie Invite-Lists ueber den MODE-Befehl
    (setzen, erfragen und loeschen) implementiert.
  - Source an ansi2knr fuer pre-ANSI-Compiler angepasst; ansi2knr in Source-
    Tree aufgenommen und in Build-System integriert; der ngIRCd compiliert
    nun z.B. unter A/UX mit dem nativen Compiler von Apple.
  - TOPIC lieferte bei unbekanntem Channel einen falschen Fehlercode.
  - LIST versteht nun Wildcards und kann an andere Server geforwarded werden.
  - wurde ein KILL fuer nicht-lokale Clients empfangen, so wurden die
    Verwaltungs-Strukturen nicht korrekt freigegeben.
  - empfangene NJOIN's wurden "zerhackt" an andere Server weitergegeben.
  - neue Konfigurationsoption "OperCanUseMode" (Sektion "Global"):
    ist sie aktiv, koennen IRC-Operatoren immer Channel-Modes setzen.
  - Dokumentation des neuen IRC+-Protokolls begonnen: doc/Protocol.txt
  - Protokoll- und Server-ID bei PASS-Befehlen auf neues Format umgestellt;
    bei empfangenen PASS-Befehlen werden diese zudem nun auch ausgewertet.
    Die unterstuetzten Flags sind in doc/Protocol.txt beschrieben.
  - mit dem neuen Befehl CHANINFO syncronisieren Server, die das IRC+-
    Protokoll unterstuetzen, Channel-Modes und Topics.
  - neue Option "--disable-ircplus" fuer das configure-Script, um das
    IRC+-Protokoll abzuschalten (per Default ist es aktiviert).
  - Ban-Lists (setzen, erfragen und loeschen) implementiert.
  - wird der Server mit "-n"/"--nodaemon" gestartet, so werden keine Mel-
    dungen mehr ueber Syslog ausgegeben, sondern nur noch auf der Konsole.
  - "Test-Suite" begonnen (in "make check" integriert): Dabei wird ein
    speziell konfigurierter Server auf Port 6789 gestartet, mit dem dann
    einige Tests durchgefuehrt werden (u.a. "Stress-Test" mit 50 Clients).
  - zu lange Operator-Namen in der Konfiguration wurden falsch gekuerzt.
  - kleine Anpassung an AIX 3.2.5: nun laeuft der ngIRCd auch dort :-)
  - ADMIN-Befehl implementiert. Die Daten hierzu werden in der Konfig-Datei
    im [Global]-Abschnitt mit den Variablen "AdminInfo1", "AdminInfo2" und
    "AdminEMail" konfiguriert.
  
ngIRCd 0.4.3, 11.06.2002

  - Bei PRIVMSG und NOTICE hat der ngIRCd nicht ueberpruft, ob das Ziel
    ueberhaupt ein User ist. War es keiner, so fuehrte dies zu einem
    Abbruch des Servers [es wurde assert() aufgerufen].

ngIRCd 0.4.2, 29.04.2002

  - LUSERS verzaehlt sich bei eigenen Server-Links nicht mehr.
  - QUIT wird nun auch von noch nicht registrierten Clients akzeptiert.
  - IRC-Funktion LIST implementiert; bisher werden allerdings noch keine
    Wildcards (bis auf "*") unterstuetzt.

ngIRCd 0.4.1, 08.04.2002

  - Bei Server-Links wird nicht mehr an Hand der Anzahl der Parameter
    eines empfangenen SERVER-Befehls, sondern "intern" erkannt, ob es
    sich um eine ein- oder ausgehende Verbindung handelt und somit das
    eigene PASS-SERVER-Paar gesendet werden muss oder nicht. Da sich
    verschiedene Versionen des Original-ircd's anders verhalten, schlug
    die Anmeldung je nach Gehenseite evtl. fehl.
  - Bei einem NICK-Befehl eines lokalen Client konnte der Server ab-
    stuerzen, da ein Format-String einer Log-Meldung fehlerhaft war.

ngIRCd 0.4.0, 01.04.2002

  - IRC-Befehle nochmal auf weitere Source-Dateien aufgespalten.
  - WHO implementiert (bisher ohne komplette Unterstuetzung von Masks).
  - Der AWAY-Mode wurde nicht ueber mehrere Server-Links weitergegeben.
  - stderr wird nun in eine Datei umgelenkt (/tmp/ngircd-<PID>.err).
    Laeuft der Server nicht im Debug-Modus, so wird diese bei Programm-
    ende geloescht. Sollte der Server abstuerzen, finden sich hier evtl.
    zusaetzliche Informationen.
  - In Nicknames wird das Zeichen "-" nun als zulaessig erkannt.
  - die Beispiel-Konfigurationsdatei (doc/sample-ngircd.conf) wird als
    ngircd.conf installiert, wenn noch keine "echte" Konfigurationsdatei
    vorhanden ist.
  - bei WHO, WHOIS und NAMES wird nun nur noch der Status "Operator" oder
    "voiced" geliefert -- nicht mehr beides.
  - Server-Gruppen implementiert: es wird immer nur zu einem Server in
    einer Gruppe eine Verbindung aufgebaut, klappt es beim ersten Server
    nicht, so wird der naechste probiert (Variable "Group" in der Kon-
    figurationsdatei, Sektion [Server]).
  - IRC_PING() ist, wenn nicht im "strict RFC"-Mode, toleranter und ak-
    zeptiert beliebig viele Parameter (z.B. BitchX sendet soetwas).
  - die "Portab-Header" werden nicht mehr benoetigt, die System-Erkennung
    wird nun ausschliesslich vom configure-Script durchgefuehrt. System-
    abhaengige Definitionen finden sich nun unter src/portrab/.
  - Clients und Channels werden nicht mehr ueber ihren Namen, sondern
    einen Hash-Wert gesucht: sollte deutlich schneller sein.
  - neuer Kommandozeilen-Parameter "--configtest": die Konfiguration wird
    gelesen und dann die verwendeten Werte angezeigt.
  - Client-Mode "s" (Server Notices) implementiert.
  - mit dem neuen Kommandozeilen-Parameter "--config"/"-f" kann eine
    alternative Konfigurationsdatei angegeben werden.
  - nach dem Start kann der ngIRCd, wenn er mit root-Rechten laeuft,
    zu einer anderen User-ID und Group-ID wechseln.
  - URL der Homepage wird u.a. bei "--version" mit angezeigt.

ngIRCd 0.3.0, 02.03.2002

  - bekommt der Server ein HUP-Signal, so startet er neu -- genau so, wie
    er auf den IRC-Befehl RESTART reagiert.
  - FAQ um Hinweise auf den Bugtracker erweitert.
  - neuer Kommandozeilen-Schalter "--passive" (-p): wird er angegeben, so
    verbindet sich der ngIRCd nicht mehr automatisch zu anderen Servern.
    Zum Debuggen manchmal ganz praktisch :-)
  - direkt nach dem Start schreibt der ngIRCd nun die aktiven Kommando-
    zeilenschalter in's Logfile (Passive, Debug, Sniffer ...).
  - das Signal-Flag SA_RESTART wird nur noch gesetzt, wenn es auf dem
    jeweiligen System auch definiert ist.
  - bei ausgehenden Verbindungen wird nun der Ziel-Port protokolliert.
  - neue Befehle VERSION und KILL implementiert.
  - make-Target "check" (und "distcheck") mit Sinn erfuellt :-)
    (die Tests sind aber bisher nicht all zu tiefgehend ...)
  - Durch einen Ueberlauf konnte die Idle-Time bei WHOIS negativ werden ...
  - Anpassungen an A/UX: gehoert nun auch zu den unterstuetzten Platformen.
  - WHOIS wird nicht mehr automatisch an den "Original-Server" weiterge-
    leitet: war eh nicht RFC-konform und machte mit Clients Probleme.
  - an User wird nun immer ein "komplettes" Prefix (mit Host-Mask) ver-
    schickt, Server bekommen nach wie vor kurze: das "Original" hat bei
    bestimmten Befehlen (PRIVMSG) ansonsten evtl. Probleme ...
  - NAMES korrigiert und vollstaendig implementiert.
  - SQUIT wird auf jeden Fall geforwarded, zudem besseres Logging.
  - Ist ein Nick bei der User-Registrierung bereits belegt, nimmt der
    Server nun korrekt weitere NICK-Befehle an und verwendet diese.
  - PRIVMSG beachtet nun die Channel-Modes "n" und "m".
  - AWAY implementiert. PRIVMSG, MODE, USERHOST und WHOIS angepasst.
  - der ngIRCd unterstuetzt nun Channel-Topics (TOPIC-Befehl).
  - ausgehende Server-Verbindungen werden nun asyncron connectiert und
    blockieren nicht mehr den ganzen Server, wenn die Gegenseite nicht
    erreicht werden kann (bis zum Timeout konnten Minuten vergehen!).
  - Wert der Konfigurations-Variable "ConnectRetry" wird besser beachtet.
  - Channel- und Nicknames werden nun ordentlich validiert.

ngIRCd 0.2.1, 17.02.2002

  - NICK korrigiert: es werden nun auch alle "betroffenen" User informiert.
  - configure-Script erweitert, u.a. bessere Anpassung an BeOS: dort wird
    nun die "libbe" zum ngIRCd gelinkt, somit funktioniert auch syslog.
  - Fehlerhafte bzw. noch nicht verstandene Modes werden nun ausfuehrlicher
    an den Client geliefert.

ngIRCd 0.2.0, 15.02.2002

  - Nicknames und Channel-Namen werden etwas besser auf Gueltigkeit ueber-
    prueft; ist aber nach wie vor noch nicht ausreichend.
  - NJOINS von Servern wurden nicht an andere Server weitergeleitet.
  - Begonnen Channel-Modes und User-Channel-Modes zu implementieren: der
    Server versteht an User-Modes o und v, beachtet letzteres allerdings
    noch nirgends. Bekannte (aber nicht beachtete!) Channel-Modes sind
    bisher a, m, n, p, q, s und t. Diese Modes werden von Usern ange-
    nommen, von anderen Servern werden auch unbekannte Modes uebernommen.
  - Benutzer von connectierenden Servern wurden nicht in den Channels ange-
    kuendigt, es wurden nur die internen Strukturen angepasst.
  - Nach dem Connect eines Users werden LUSERS-Informationen angezeigt.

ngIRCd 0.1.0, 29.01.2002

  - User-Modes bei User-Registrierungen von andere Servern (NICK-Befehl)
    wurden falsch uebernommen. Zudem wurden die Modes falsch gekuerzt.
  - Server-Verbindungen werden nun nach dem Start erst nach einer kurzen
    Pause aufgebaut (zur Zeit drei Sekunden).
  - Hilfetext korrigiert: --help und --version waren vertauscht, die
    Option --sniffer wurde gar nicht erwaehnt.
  - FAQ.txt in doc/ begonnen.
  - der IRC-Sniffer wird nur noch aktiviert, wenn die Option auf der
    Kommandozeile angegeben wurde (bei entsprechend compiliertem Server).
  - Channels implementiert, bisher jedoch noch ohne Channel-Modes, d.h.
    es gibt keine Channel-Ops, kein Topic, kein "topic lock" etc. pp.
    Chatten in Channels ist aber natuerlich moeglich ;-)
  - neue Befehle fuer Channles: JOIN, PART und NJOIN.
  - durch die Channels einige Aenderungen an PRIVMSG, WHOIS, MODE etc.
  - neu connectierenden Servern werden nun Channels mit NJOIN angekuendigt.
  - Signal-Hander geaendert: die Fehlermeldung "interrupted system call"
    sollte so nicht mehr auftreten.
  - "spaeter" neu connectierende Server werden nun im Netz angekuendigt.
  - SERVER-Meldungen an andere Server sind nun korrekt sortiert.
  - Clients werden nun korrekt sowohl nur ueber den Nickname als auch die
    komplette "Host Mask" erkannt.

ngIRCd 0.0.3, 16.01.2002

  - Server-Links vollstaendig implementiert: der ngIRCd kann nun auch
    "Sub-Server" haben, also sowohl als Leaf-Node als auch Hub in einem
    IRC-Netzwerk arbeiten.
  - MODE und NICK melden nun die Aenderungen an andere Server, ebenso
    die Befehle QUIT und SQUIT.
  - WHOIS wird nun immer an den "Original-Server" weitergeleitet.
  - Parses handhabt Leerzeichen zw. Parametern nun etwas "lockerer".
  - Status-Codes an den Server selber werden ignorier.
  - Log-Meldungen und Log-Level ueberarbeitet und korrigiert.
  - Kommandozeilen-Parser: Debug- und No-Daemon-Modus, Hilfe.
  - ngIRCd wandelt sich nun in einen Daemon (Hintergrundprozess) um.
  - WHOIS korrigiert: Anfrage wurde u.U. an User geforwarded anstatt vom
    Server beantwortet zu werden.
  - neue Befehle: LUSERS, LINKS
  - Client-Modes von Remote-Servern wurden nicht korrekt uerbernommen.

ngIRCd 0.0.2, 06.01.2002

  - Struktur der Konfigurationsdatei geaendert: sie ist nun "Samba like",
    d.h. sie besteht aus Abschnitten (siehe "doc/sample-ngircd.conf").
  - Es koennen mehrere IRC-Server-Opertatoren konfiguriert werden.
  - Zombies der Resolver-Prozesse werden nun ordentlich "getoetet".
  - NICK kann nun die Gross- und Kleinschreibung eines Nicks aendern.
  - ein Server-Passwort ist nun konfigurierbar.
  - neue Befehle: ERROR, SERVER, NJOIN (nur als "Fake"), SQUIT.
  - Asyncroner Resolver Hostname->IP implementiert.
  - Server-Links teilweise implementiert: bisher kann der ngIRCd jedoch
    nur "leafed server" sein, d.h. keine "Client-Server" haben. Einige
    Befehle sind auch noch nicht (optimal) angepasst: PRIVMSG funktioniert
    aber bereits, ebenso wie WHOIS (letzterer wird immer an den Server,
    auf dem der User registriert ist, weitergegeben).
  - "arpa/inet.h" wird nur noch includiert, wenn vorhanden.
  - Fehler bei select() fuerhen nun zum Abbruch von ngIRCd, bisher landete
    der Server zumeist in einer Endlosschleife.
  - Logmeldungen und Level an vielen Stellen verbessert.
  - lokalen Usernamen wird nun ein "~" vorangestellt, da bisher noch keine
    Ident-Anfragen gemacht werden.

ngIRCd 0.0.1, 31.12.2001

  - erste oeffentliche Version von ngIRCd als "public preview" :-)
